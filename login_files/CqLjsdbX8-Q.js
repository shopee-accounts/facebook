if (self.CavalryLogger) { CavalryLogger.start_js(["xo9Es"]); }

__d("MSiteMessengerDiodeLoggerEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FAST_APP_SWITCH_ATTEMPT:"fast_app_switch_attempt",FAST_APP_SWITCH_FAIL:"fast_app_switch_fail"};},null);
__d("MTaggingCounterEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={GEO_PANEL_LOAD:"geo_panel_load",GEO_PANEL_ACCEPT:"geo_panel_accept",GEO_PANEL_DENY:"geo_panel_deny",GEO_PANEL_FAIL:"geo_panel_fail",GEO_PANEL_SUCCESS:"geo_panel_success",GEO_POPUP_LOAD:"geo_popup_load",GEO_POPUP_FAIL:"geo_popup_fail",GEO_POPUP_SUCCESS:"geo_popup_success"};},null);
__d("XTaggingCounterController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/composer\/tagging\/counter\/",{event:{type:"Enum",required:true,enumType:1}});},null);
__d('MTaggingCounter',['AsyncSignal','XTaggingCounterController'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={logEvent:function(event,k){var l=i.getURIBuilder().setEnum('event',event).getURI();new h(l).send();}};f.exports=j;},null);
__d('Dispatcher_DEPRECATED',['invariant','monitorCodeUse'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j='ID_';function k(){this.$Dispatcher_DEPRECATED1={};this.$Dispatcher_DEPRECATED2=false;this.$Dispatcher_DEPRECATED3={};this.$Dispatcher_DEPRECATED4={};this.$Dispatcher_DEPRECATED5=1;}k.prototype.register=function(l,m){m=this.__genID(m);this.$Dispatcher_DEPRECATED1[m]=l;return m;};k.prototype.unregister=function(l){!this.$Dispatcher_DEPRECATED1[l]?h(0):void 0;delete this.$Dispatcher_DEPRECATED1[l];};k.prototype.waitFor=function(l){!this.$Dispatcher_DEPRECATED2?h(0):void 0;for(var m=0;m<l.length;m++){var n=l[m];if(this.$Dispatcher_DEPRECATED4[n]){!this.$Dispatcher_DEPRECATED3[n]?h(0):void 0;continue;}!this.$Dispatcher_DEPRECATED1[n]?h(0):void 0;this.$Dispatcher_DEPRECATED7(n);}};k.prototype.dispatch=function(l){!!this.$Dispatcher_DEPRECATED2?h(0):void 0;this.$Dispatcher_DEPRECATED8(l);try{for(var m in this.$Dispatcher_DEPRECATED1){if(this.$Dispatcher_DEPRECATED4[m])continue;this.$Dispatcher_DEPRECATED7(m);}}finally{this.$Dispatcher_DEPRECATED9();}};k.prototype.isDispatching=function(){return this.$Dispatcher_DEPRECATED2;};k.prototype.$Dispatcher_DEPRECATED7=function(l){this.$Dispatcher_DEPRECATED4[l]=true;this.__invokeCallback(l,this.$Dispatcher_DEPRECATED1[l],this.$Dispatcher_DEPRECATED6);this.$Dispatcher_DEPRECATED3[l]=true;};k.prototype.__invokeCallback=function(l,m,n){m(n);};k.prototype.$Dispatcher_DEPRECATED8=function(l){for(var m in this.$Dispatcher_DEPRECATED1){this.$Dispatcher_DEPRECATED4[m]=false;this.$Dispatcher_DEPRECATED3[m]=false;}this.$Dispatcher_DEPRECATED6=l;this.$Dispatcher_DEPRECATED2=true;};k.prototype.$Dispatcher_DEPRECATED9=function(){delete this.$Dispatcher_DEPRECATED6;this.$Dispatcher_DEPRECATED2=false;};k.prototype.__genID=function(l){l=l||j+this.$Dispatcher_DEPRECATED5++;while(this.$Dispatcher_DEPRECATED1[l])l+=this.$Dispatcher_DEPRECATED5++;return l;};f.exports=k;},null);
__d("requireWeak",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){e.call(null,[i],j);}f.exports=h;},null);
__d('DataStore',['ex','MLegacyDataStore'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={set:function(k,l,m){if(!k)throw new TypeError(h('DataStore.set: element is required, got %s',typeof k));var n=i.get(k);n[l]=m;return k;},get:function(k,l,m){var n=i.get(k),o=n[l];if(m!==undefined&&o===undefined)o=n[l]=m;return o;}};f.exports=j;},null);
__d('DataAttributeUtils',['DataStore','Parent'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={LEGACY_CLICK_TRACKING_ATTRIBUTE:'data-ft',CLICK_TRACKING_DATASTORE_KEY:'data-ft',ENABLE_STORE_CLICK_TRACKING:'data-fte',REMOVE_LEGACY_TRACKING:'data-ftr',getDataAttribute:function(m,n){if(k[n])return k[n](m);return m.getAttribute(n);},setDataAttribute:function(m,n,o){if(l[n])return l[n](m,o);return m.setAttribute(n,o);},getDataFt:function(m){if(m.getAttribute(j.ENABLE_STORE_CLICK_TRACKING)){var n=h.get(m,j.CLICK_TRACKING_DATASTORE_KEY);if(!n)n=j.moveClickTrackingToDataStore(m,m.getAttribute(j.REMOVE_LEGACY_TRACKING));return n;}return m.getAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE);},setDataFt:function(m,n){if(m.getAttribute(j.ENABLE_STORE_CLICK_TRACKING)){h.set(m,j.CLICK_TRACKING_DATASTORE_KEY,n);return;}m.setAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE,n);},moveClickTrackingToDataStore:function(m,n){var o=m.getAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE);if(o){h.set(m,j.CLICK_TRACKING_DATASTORE_KEY,o);if(n)m.removeAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE);}return o;},getClickTrackingParent:function(m){var n=i.byAttribute(m,j.LEGACY_CLICK_TRACKING_ATTRIBUTE)||i.byAttribute(m,j.ENABLE_STORE_CLICK_TRACKING);return n;},getClickTrackingElements:function(m){return m.querySelectorAll('['+j.LEGACY_CLICK_TRACKING_ATTRIBUTE+'], '+'['+j.ENABLE_STORE_CLICK_TRACKING+']');}},k={'data-ft':j.getDataFt},l={'data-ft':j.setDataFt};f.exports=j;},null);
__d('MFeedErrorDetection',['Banzai','DataAttributeUtils','ge'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={};function l(event,n,o,p){var q={event:event,shouldLogDetail:n,site:'mtouch'};if(n){q.intValues=o;q.normalValues=p;}h.post('feed_error_detection',q,{delay:0});}var m={storyExists:function(n){return n in k;},registerFeedStories:function(n,o){var p=j(n);if(p==null)return;var q=p.childNodes;for(var r=0;r<q.length;r++){var s=q[r],t=s.childNodes[0],u=t.getAttribute('data-dedupekey'),v=i.getDataFt(s);if(!u||!v)continue;if(u in k){var w={};if(o)w={dedupKey:u,ft_A:v,ft_B:k[u]};l('mtouch_duplicate_stories',o,{},{dup_field:w});}else k[u]=v;}}};f.exports=m;},null);
__d('MAnimation',['CSS','MLegacyDataStore','getVendorPrefixedName','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=j('animation-duration');function m(n,o,p){var q=i.get(n);clearTimeout(q.timerEnd);delete q.timerEnd;h.conditionClass(n,o,false);h.conditionClass(n,'accelerate',true);n.style[l]=p+'ms';q.timerStart=k(h.conditionClass.bind(null,n,o,true),0);q.timerEnd=k(function(){h.conditionClass.bind(null,n,o,false);n.style[l]='';h.conditionClass(n,'accelerate',false);var r=i.get(n);clearTimeout(r.timerStart);delete r.timerStart;},p);}f.exports={animate:m};},null);
__d('MExpandablePymk',['setTimeoutAcrossTransitions','CSS','DOM','MLegacyDataStore','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m='m-add-friend';function n(p,q,r){var s=[],t=0;if(p){var u=j.scry(p,'div','story-wrap');for(var v=0;v<u.length;v++){var w=j.find(u[v],'a',m),x=k.get(w);s.push(x.id);var y=k.get(u[v]);if(y.sent)t++;}r.pymk_group_id=q;}if(s)r.uw=s.join(',');if(t)r.pc=t;return s;}function o(p,event,q){if(!p)return;var r=p.getElementsByClassName("_4-ck");if(r.length>0)h(function(){p.style.height="";},800);var s=function(aa){return function(){i.conditionClass(aa,"_4-cl",true);};},t=function(aa){return function(){i.conditionClass(aa,"_4-ck",false);};},u=j.scry(p,'div','story-wrap'),v=0;for(var w=0;w<u.length;w++){var x=k.get(u[w]);if(x.transitionIn){k.set(u[w],{transitionIn:false});h(s(u[w]),800);h(t(u[w]),1200);}else if(x.sent){var y=u[w];if(r.length>0)p.style.height=(p.offsetHeight-r.length*r[0].offsetHeight).toString()+'px';i.conditionClass(y,"_4-cn",true);if(q){i.conditionClass(y,"_4-co",true);i.conditionClass(y,"_4-cp",false);}h(function(){j.remove(y);},600);v++;}}if(v<u.length){var z=event.getNode('story-wrap');k.set(z,{sent:true});if(q){i.conditionClass(z,"_4-cp",true);i.conditionClass(z,"_4-co",false);}}}f.exports={getExtraArgs:n,animateExpansion:o};},null);
__d('MAddFriend',['DOM','MLegacyDataStore','Stratcom','MAnimation','MExpandablePymk','MFriendingState','MPageCache','MPageControllerPath','MRequest','MRequestTypes','MURI','MFriendingActionError','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u='m-add-friend',v='m-cancel-request',w='m-unfriend-request',x='m-unfollow-request',y='m-follow-request',z='check',aa='friends',ba='add_friend_pymk_chain_placeholder',ca='/a/mobile/friends/add_friend.php',da='/a/friendrequest/cancel/index.php',ea='/a/friends/remove',fa='/a/subscriptions/remove',ga='/a/subscriptions/add',ha=86;function ia(sa){var ta=sa.querySelector('.touched_hide');ta&&k.animate(ta,"_4-ic",500);}function ja(){var sa=o.getRequestPath();n.removeCachedPage(sa);n.clearCachedIUIResponses(sa);}function ka(event){var sa=event.getNode(u),ta=i.get(sa),ua=event.getNode('m-add-friend-secondary'),va=i.get(ua),wa=ta.pymk_group_id||'pymk_suggestions_box',xa=event.getNode('id:'+wa),ya=document.getElementById(ba);i.set(ua,{one_click_adding:true,one_click_cancel_event:null});ja();var za={id:ta.id,hf:ta.hf,sc:ta.sc,so:ta.so,pl:ta.pl,at:ta.at,et:ta.et,ed:ta.ed,fref:ta.fref};if(ta.floc)za.floc=ta.floc;if(ta.frefs)za.frefs=ta.frefs;if(ta.el)za.el=ta.el;var ab=l.getExtraArgs(xa,wa,za),bb=h.find(ua,'*',z),cb=h.find(ua,'div','m-add-friend-flyout'),db=new r(ca);if(ta.searchlog)db.addQueryData(ta.searchlog);var eb=new r(sa.href).getQueryData()._ft_;if(eb)db.addQueryData({_ft_:eb});var fb=new p(db.toString()).setType(q.DEPENDENT);fb.setData(za);var gb=function(){h.show(bb);i.get(ua).bounce&&ia(bb);j.listen('friending_state_change',null,la.bind(event,za.id,s.SEND_OUTGOING_REQUEST_ERROR));j.invoke(m.REQUEST_SENT,null,{event:event,userid:za.id});};fb.listen('start',function(){h.hide(cb);gb();});fb.listen('postprocess',function(hb){if(va.one_click_adding){i.set(ua,{one_click_adding:false});if(va.one_click_cancel_event)na(va.one_click_cancel_event);}if(ab)l.animateExpansion(xa,event,ya);});fb.send();event.kill();}function la(sa,ta,event){var ua=event.getData();if(ua.userid!=sa)return;if(ua.error!=ta)return;var va=this.getNode('m-add-friend-secondary');if(ua.error===s.SEND_OUTGOING_REQUEST_ERROR){var wa=h.find(va,'*',z),xa=h.find(va,'div','m-add-friend-flyout');h.show(xa);h.hide(wa);j.invoke(s.SEND_OUTGOING_REQUEST_ERROR,null,{event:this});}else if(ua.error===s.CANCEL_OUTGOING_REQUEST_ERROR){var ya=h.find(va,'a','m-cancel-request'),za=h.find(va,'div','m-add-friend-flyout');h.show(ya);h.hide(za);j.invoke(s.CANCEL_OUTGOING_REQUEST_ERROR,null,{event:this});}j.removeCurrentListener();}function ma(sa){var ta=i.get(sa.getNode(w)),event=ta.flyoutEvent,ua=event.getNode('undoable-action');if(!ua)ua=event.getNode('m-add-friend-secondary');var va=h.scry(ua,'*',aa)[0],wa=h.find(ua,'div','m-add-friend-flyout'),xa=new r(ea),ya=new p(xa);ya.setData({friend_id:ta.id,noReload:true,unref:ta.unfriend_ref});ya.listen('start',function(){h.hide(va);if(!ta.is_deactivated)h.show(wa);j.invoke(m.UNFRIENDED,null,{event:event});});ya.send();event.kill();}function na(event){var sa=i.get(event.getNode(v)),ta=event.getNode('undoable-action');if(!ta)ta=event.getNode('m-add-friend-secondary');if(!ta)ta=sa.parentNode;var ua=h.scry(ta,'*',z)[0],va=h.find(ta,'*','load'),wa=h.find(ta,'div','m-add-friend-flyout'),xa=event.getNode('m-add-friend-secondary'),ya=xa?i.get(xa):null;if(ya&&ya.one_click_adding){i.set(xa,{one_click_cancel_event:event});h.hide(ua);h.show(va);return;}var za=function(){h.show(wa);j.invoke(m.REQUEST_CANCELED,null,{event:event,userid:sa.id});},ab=new r(da),bb=new p(ab);bb.setData({subject_id:sa.id,ref_param:sa.ref_param,floc:sa.floc,frefs:sa.frefs});j.listen('friending_state_change',null,la.bind(event,sa.id,s.CANCEL_OUTGOING_REQUEST_ERROR));bb.listen('start',function(){h.hide(ua);h.show(va);});bb.listen('finally',function(){h.hide(va);za();var cb=event.getNode('story-wrap');if(cb)i.set(cb,{sent:false});});bb.send();event.kill();}function oa(event){var sa=event.getNode(x),ta=i.get(sa),ua=new r(fa),va=new p(ua);va.setData({subject_id:ta.id,forceredirect:false,location:ha});va.send();event=ta.flyoutEvent;var wa=event.getNode('popup-action-trigger');i.set(wa,{is_following:false});event.kill();}function pa(event){var sa=event.getNode(y),ta=i.get(sa),ua=new r(ga),va=new p(ua);va.setData({subject_id:ta.id,forceredirect:false,location:ha});va.send();event=ta.flyoutEvent;var wa=event.getNode('popup-action-trigger');i.set(wa,{is_following:true});event.kill();}var qa=false,ra=function(sa){if(qa)return;qa=true;j.listen('click',u,ka);j.listen('click',v,na);j.listen('click',w,ma);if(typeof sa!=='undefined'&&sa){j.listen('click',x,oa);j.listen('click',y,pa);}};f.exports={main:ra};},null);
__d('MAddFriendNew',['MFriendingState','DOM','Stratcom'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='m-add-friend-flyout',l='m-cancel-request';function m(n,o,p){'use strict';this.unit=p;this.userid=o;j.listen(h.REQUEST_SENT,null,this.onFriendRequestSent.bind(this));j.listen(h.REQUEST_CANCELED,null,this.onFriendRequestCanceled.bind(this));}m.prototype.onFriendRequestCanceled=function(event){'use strict';var n=event.getData();if(!n||n.userid!==this.userid)return;var o=i.scry(this.unit,'*',k)[0],p=i.scry(this.unit,'*',l)[0];i.show(o);i.hide(p);};m.prototype.onFriendRequestSent=function(event){'use strict';var n=event.getData();if(!n||n.userid!==this.userid)return;var o=i.scry(this.unit,'*',k)[0],p=i.scry(this.unit,'*',l)[0];i.hide(o);i.show(p);};f.exports=m;},null);
__d('MFriendsActionBubble',['MLegacyDataStore','DOM','Stratcom','MURI'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='m-unfriend-request',m='/friendlists/edit',n='manage-friend-list',o='m-follow-request',p='m-unfollow-request';function q(r){'use strict';this.$MFriendsActionBubble1=r;this.$MFriendsActionBubble2=null;}q.prototype.enable=function(){'use strict';this.$MFriendsActionBubble2=[j.listen('click','are-friends-popup',this.$MFriendsActionBubble3.bind(this)),j.listen('click',n,this.$MFriendsActionBubble4.bind(this))];};q.prototype.$MFriendsActionBubble3=function(r){'use strict';var s=this.$MFriendsActionBubble1.getContentRoot(),t=r.getNode('popup-action-trigger'),u=i.scry(s,'*',l)[0];this.$MFriendsActionBubble5(t,u,r);var v=i.scry(s,'*',n)[0];this.$MFriendsActionBubble5(t,v,r);this.$MFriendsActionBubble6(t,s,r);};q.prototype.$MFriendsActionBubble6=function(r,s,t){'use strict';var u=h.get(r).is_following;if(u===null)return;var v=i.scry(s,'*',p)[0];this.$MFriendsActionBubble5(r,v,t);var w=i.scry(s,'*',o)[0];this.$MFriendsActionBubble5(r,w,t);if(u){i.show(v);i.hide(w);}else{i.show(w);i.hide(v);}};q.prototype.$MFriendsActionBubble5=function(r,s,t){'use strict';if(!r||!s)return;var u=h.get(r);u.flyoutEvent=t;h.set(s,u);};q.prototype.$MFriendsActionBubble7=function(r,event){'use strict';if(window.FW_ENABLED||!window.APP_ENABLED){event.kill();window.location.href=r.toString();}else j.invoke('go',null,{uri:r});};q.prototype.$MFriendsActionBubble4=function(event){'use strict';var r=h.get(event.getNode(n)),s=new k(m).setQueryData({subject_id:r.id,ref_param:r.manage_list_ref});this.$MFriendsActionBubble7(s,event);};q.prototype.disable=function(){'use strict';while(this.$MFriendsActionBubble2.length)this.$MFriendsActionBubble2.pop().remove();};f.exports=q;},null);
__d('MHome',['Stratcom'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){h.listen('m:page:unload',null,function(j){h.invoke('m:homepage:unload');h.removeCurrentListener();});h.invoke('m:homepage:load');}f.exports={init:i};},null);
__d("Time",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getGMTOffset:function(i){var j=new Date(),k=j.getTimezoneOffset()/30,l=j.getTime()/1000,m=Math.round((i-l)/1800),n=Math.round(k+m)%48;if(n>24){n-=Math.ceil(n/48)*48;}else if(n<-28)n+=Math.ceil(n/-48)*48;return n*30;}};f.exports=h;},null);
__d('MEntstreamViewportTracking',['Banzai','DOM','FBJSON','MViewport','MViewportTracking','StratcomManager','Vector'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p;if(c.__markCompiled)c.__markCompiled();var q=51;o=babelHelpers.inherits(r,l);p=o&&o.prototype;r.init=function(s){'use strict';m.enableDispatch(document,'scroll');new r().init(s);};r.prototype.getDataFromConfig=function(s){'use strict';this.shouldWaterfallLogging=!!s.should_waterfall_logging;};r.prototype.__getStreamRoot=function(){'use strict';if(!this.$MEntstreamViewportTracking1)this.$MEntstreamViewportTracking1=document.getElementById('root');return this.$MEntstreamViewportTracking1;};r.prototype.getAllStories=function(){'use strict';return i.scry(this.__getStreamRoot(),'article','story-div');};r.prototype.getTimeout=function(){'use strict';return 300;};r.prototype.getDataToLog=function(s){'use strict';var t=Object.assign(j.parse(s.getAttribute('data-ft'),f.id),{evt:q}),u,v,w;if('getBoundingClientRect' in s){u=s.getBoundingClientRect();v=u.height;w=u.top+k.getScrollTop();}else{v=n.getDim(s).y;w=n.getPos(s).y;}t.evt_value=v;t.offset=w;t.story_height=v;t.impression_type=k.isLandscape()?'landscape':'portrait';if(this.shouldWaterfallLogging){t.should_waterfall_logging=1;t['interface']='m_touch';}return t;};r.prototype.getWaterfallData=function(s,t){'use strict';var u=this.getDataToLog(s);u.step=t;return u;};r.prototype.getStoryID=function(s){'use strict';var t=s.getAttribute('data-ft');if(!t)return null;return j.parse(t,f.id).mf_story_key;};r.prototype.sendDataToLog=function(s){'use strict';h.post('feed_tracking',{ft:s});};function r(){'use strict';o.apply(this,arguments);}f.exports=r;},null);
__d('MSiteMessengerDiodeTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(){this.clear();}k.prototype.log=function(){i.log('logger:MSiteMessengerDiodeLoggerConfig',this.$MSiteMessengerDiodeTypedLogger1,h.BASIC);};k.prototype.logVital=function(){i.log('logger:MSiteMessengerDiodeLoggerConfig',this.$MSiteMessengerDiodeTypedLogger1,h.VITAL);};k.prototype.clear=function(){this.$MSiteMessengerDiodeTypedLogger1={};return this;};k.prototype.updateData=function(m){this.$MSiteMessengerDiodeTypedLogger1=babelHelpers['extends']({},this.$MSiteMessengerDiodeTypedLogger1,m);return this;};k.prototype.setEvent=function(m){this.$MSiteMessengerDiodeTypedLogger1.event=m;return this;};k.prototype.setMessagingEntryPoint=function(m){this.$MSiteMessengerDiodeTypedLogger1.messaging_entry_point=m;return this;};k.prototype.setMsiteDiodeStateFromClient=function(m){this.$MSiteMessengerDiodeTypedLogger1.msite_diode_state_from_client=m;return this;};k.prototype.setVC=function(m){this.$MSiteMessengerDiodeTypedLogger1.vc=m;return this;};var l={event:true,messaging_entry_point:true,msite_diode_state_from_client:true,vc:true};f.exports=k;},null);
__d('MSnowflakeLink',['DataAttributeUtils','DOM','MModalDialog','URI','MLinkHack','Parent','Stratcom','destroyOnUnload'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(q){'use strict';this.$MSnowflakeLink1=false;this.$MSnowflakeLink2=q.node;this.$MSnowflakeLink3=q.permalink;this.$MSnowflakeLink4=q.setToken;this.$MSnowflakeLink5=q.targetPhoto;this.$MSnowflakeLink6=i.listen(q.node,'click',null,this.onClick.bind(this));o(function(){return this.$MSnowflakeLink6.remove();}.bind(this));this.$MSnowflakeLink7();}p.prototype.getFeedTrackingOwnerID=function(){'use strict';var q=h.getClickTrackingParent(this.$MSnowflakeLink2);return q&&q.id;};p.prototype.getPermalinkURI=function(){'use strict';return new k(this.$MSnowflakeLink3).addQueryData('photo_id',this.$MSnowflakeLink5);};p.prototype.getModalDialogURI=function(){'use strict';return new k(this.$MSnowflakeLink2.getAttribute('href')).addQueryData('cached_data',this.$MSnowflakeLink1).addQueryData('ftid',this.getFeedTrackingOwnerID());};p.prototype.onClick=function(q){'use strict';l.remove(this.$MSnowflakeLink2);j.openWithPermalinkURI(this.getModalDialogURI().toString(),this.getPermalinkURI());q.kill();};p.prototype.$MSnowflakeLink7=function(){'use strict';if(!this.$MSnowflakeLink4){this.$MSnowflakeLink1=true;return;}var q=n.listen('m:photosetstore:update',null,function(event){var r=(event.getData()||{}).set_token;if(!q||r!=this.$MSnowflakeLink4)return;this.$MSnowflakeLink1=true;q.remove();q=null;}.bind(this));o(function(){return q&&q.remove();});};f.exports=p;},null);
__d('SaveState',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={SAVING:'saving',SAVED:'saved',UNSAVING:'unsaving',UNSAVED:'unsaved'};f.exports=h;},null);
__d('SaveStateHandler',['SaveState'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=null;function j(){'use strict';this.$SaveStateHandler1={};this.$SaveStateHandler2={};}j.prototype.addListener=function(k,l){'use strict';if(!this.$SaveStateHandler1[k])this.$SaveStateHandler1[k]=[];this.$SaveStateHandler1[k].push(l);};j.prototype.setState=function(k,l){'use strict';k.forEach(function(m){this.$SaveStateHandler2[m]=l;if(!this.$SaveStateHandler1[m])return;var n=this.$SaveStateHandler1[m];n.forEach(function(o){try{o.call(window,l);}catch(p){}});},this);};j.prototype.getState=function(k){'use strict';return this.$SaveStateHandler2[k];};j.$SaveStateHandler3=function(){'use strict';if(!i)i=new j();return i;};j.listen=function(k,l){'use strict';this.$SaveStateHandler3().addListener(k,l);};j.getState=function(k){'use strict';return this.$SaveStateHandler3().getState(k);};j.saving=function(k){'use strict';this.$SaveStateHandler3().setState(k,h.SAVING);};j.saved=function(k){'use strict';this.$SaveStateHandler3().setState(k,h.SAVED);};j.unsaving=function(k){'use strict';this.$SaveStateHandler3().setState(k,h.UNSAVING);};j.unsaved=function(k){'use strict';this.$SaveStateHandler3().setState(k,h.UNSAVED);};j.isSaveAction=function(k){'use strict';var l=this.$SaveStateHandler3().getState(k);return l==h.UNSAVED||l==h.UNSAVING;};j.isInTransition=function(k){'use strict';var l=this.$SaveStateHandler3().getState(k);return l==h.SAVING||l==h.UNSAVING;};f.exports=j;},null);
__d("XStoryChevronController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/story_chevron_menu\/",{feedobjects_identifiers:{type:"String"},feed_context:{type:"String"},chevron_button_id:{type:"String"},story_node_id:{type:"String"},zombie_story:{type:"String"},is_menu_registered:{type:"Bool",defaultValue:false},outer_story_token:{type:"String"}});},null);
__d('MAsyncChevronMenu',['$','cx','CSS','requireWeak','BanzaiODS','MLegacyDataStore','DOM','MParent','MRequest','MTouchClick','Stratcom','SubscriptionsHandler','XStoryChevronController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=null;k('MHideStoryActions',function(ia){return u=ia;});function v(ia){var ja=o.bySigil(ia,'story-popup-metadata');return ja;}var w;function x(){l.bumpEntityKey('mtouch_async_chevron','chevron_clicked');var ia=this.getCausalElement(),ja=m.get(ia),ka=v(ia),la=t.getURIBuilder().setBool('is_menu_registered',!!(u&&u.getActionBubble())).getURI(),ma=new p(la);j.show(aa);j.hide(ba);j.hide(ca);w=ka;ma.setMethod('POST');ma.setData({feedobjects_identifiers:ja.feedobjectsIdentifiers,feed_context:ja.feedContext,zombie_story:ja.zombieStoryURI?ja.zombieStoryURI:'',story_topic_feedback:ja.storyTopicFeedbackURI?ja.storyTopicFeedbackURI:'',story_node_id:ka.id,chevron_button_id:ia.id,outer_story_token:ja.outerStoryToken?ja.outerStoryToken:''});ma.listen('error',function(na){l.bumpEntityKey('mtouch_async_chevron','request_failed');j.hide(aa);if(na=='status=0'){l.bumpEntityKey('mtouch_async_chevron','request_failed_no_internet_connection');j.show(ba);j.hide(ca);}else{l.bumpEntityKey('mtouch_async_chevron','request_failed_server_side_error');j.show(ca);j.hide(ba);}});ma.listen('done',function(){l.bumpEntityKey('mtouch_async_chevron','request_done');});ma.send();}var y,z,aa,ba,ca;function da(){if(z){z.release();z=null;}y=null;aa=null;ba=null;ca=null;}function ea(ia){if(y){y.destroy();da();}y=ia;var ja=ia.getContentRoot();aa=n.find(ja,'div','loadingWrapper');ba=n.find(ja,'div','noConnectionWrapper');ca=n.find(ja,'div','requestErrorWrapper');z=new s('StoryChevronMenu');z.addSubscriptions(y.addListener('beforeshow',x,y),r.listen('m:page:unload',null,da),r.listen('m:story:action-bubble-initialized',null,function(ka){var la=ka.getData();if(la.menuNubID)fa(h(la.menuNubID),la.wasOpen);}));}function fa(ia,ja){if(!y.isShown()&&!ja||!u||!u.getActionBubble())return;y.hide();var ka=v(ia);if(w==ka){var la=ia.getElementsByClassName("_4s19")[0];q.click(la);}}function ga(ia,ja){n.replace(h(ja),ia);fa(ia);}function ha(ia){if(!w||w.id==ia){y.hide();w=null;}}f.exports={init:ea,replaceChevronTrigger:ga,closeLoadingFlyout:ha};},null);
__d('MShareAngoraAttachment',['Stratcom'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=false,j=function(k){if(i)return;i=true;window.addEventListener('error',function(event){if(event.target.nodeName=='IMG'){for(var l=event.target;l!=document.body&&!h.hasSigil(l,'shareAngoraAttachmentMedia');l=l.parentNode);if(l!=document.body)l.style.display='none';}},true);};g.registerDeadImageListener=j;},null);
__d('TimezoneAutoset',['MRequest','Time'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k=function(l){if(j)return;j=true;if(!l.time||l.offset===undefined)return;var m=-i.getGMTOffset(l.time);if(l.forceUpdate||m!=l.offset)new h(l.uri).setMethod('GET').setData({offset:m,is_forced:l.forceUpdate}).send();};g.main=k;},null);
__d('MLocationPrompt',['DOM','MRequest','Stratcom','WebStorage','XPlacesUpdateLocationController','MTaggingCounter','MTaggingCounterEvent','ViewerLocationSource'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=['latitude','longitude','accuracy','altitude','altitudeAccuracy','heading','speed'],q={enableHighAccuracy:true,timeout:60000,maximumAge:300000},r=60000;s.init=function(t,u,v,w){'use strict';return new s(t,u,v,w);};s.getCoords=function(){'use strict';return s.coords;};s.isLocationAvailable=function(){'use strict';return s.locationAvailable;};function s(t,u,v,w){'use strict';this.lastUpdateTime=0;this.container=t;this.question=u;this.loading=v;this.errored=w;var x=k.getLocalStorage();if(x&&x.getItem(s.GEOLOCATION_KEY)==='1'){this.$MLocationPrompt1();}else{s.locationAvailable=false;h.show(this.question);h.hide(this.loading);h.hide(this.errored);h.show(this.container);j.invoke('m:jewel-set:notifications-jewel:refresh-flyout');m.logEvent(n.GEO_PANEL_LOAD);}this.listeners=[j.listen('click','accept-location',this.$MLocationPrompt2.bind(this)),j.listen('click','deny-location',this.$MLocationPrompt3.bind(this)),j.listen('m:page:unload',null,this.$MLocationPrompt4.bind(this))];}s.prototype.clearWatch=function(){'use strict';if(!this.watchID)return;navigator.geolocation.clearWatch(this.watchID);this.watchID=null;};s.prototype.$MLocationPrompt2=function(){'use strict';m.logEvent(n.GEO_PANEL_ACCEPT);this.$MLocationPrompt1(true);};s.prototype.$MLocationPrompt1=function(t){'use strict';s.locationAvailable=true;var u=k.getLocalStorage();if(u)u.setItem(s.GEOLOCATION_KEY,1);h.show(this.container);h.hide(this.question);h.show(this.loading);h.hide(this.errored);j.invoke('m:jewel-set:notifications-jewel:refresh-flyout');var v=setTimeout(this.$MLocationPrompt5,q.timeout);this.watchID=navigator.geolocation.watchPosition(function(w){if(t)m.logEvent(n.GEO_PANEL_SUCCESS);clearTimeout(v);this.$MLocationPrompt6(w);}.bind(this),function(w){if(t)m.logEvent(n.GEO_PANEL_FAIL);clearTimeout(v);this.$MLocationPrompt5(w);}.bind(this),q);j.invoke(s.STRATCOM_ACCEPT);};s.prototype.$MLocationPrompt3=function(){'use strict';s.locationAvailable=false;m.logEvent(n.GEO_PANEL_DENY);h.hide(this.container);j.invoke('m:jewel-set:notifications-jewel:refresh-flyout');j.invoke(s.STRATCOM_DENY);};s.prototype.$MLocationPrompt6=function(t){'use strict';s.locationAvailable=true;if(t){var u={},v;for(var w=0;w<p.length;w++){v=p[w];if(t.coords[v])u[v]=t.coords[v];}if(t.timestamp)u.timestamp=t.timestamp/1000;this.$MLocationPrompt7(JSON.stringify(u));h.hide(this.container);s.coords=u;j.invoke('m:jewel-set:notifications-jewel:refresh-flyout');j.invoke(s.STRATCOM_UPDATE,null,{position:t});}};s.prototype.$MLocationPrompt5=function(t){'use strict';s.locationAvailable=false;this.clearWatch();var u=k.getLocalStorage();if(u)u.setItem(s.GEOLOCATION_KEY,0);h.show(this.container);h.hide(this.question);h.hide(this.loading);h.show(this.errored);j.invoke('m:jewel-set:notifications-jewel:refresh-flyout');j.invoke(s.STRATCOM_FAIL,null,{error:t});m.logEvent(n.GEO_PANEL_FAIL);};s.prototype.$MLocationPrompt7=function(t){'use strict';var u=Date.now();if(u-this.lastUpdateTime>r){this.lastUpdateTime=u;var v=l.getURIBuilder().setString('json_location',t).setEnum('source',o.MSITE_LOCATION_PROMPT).getURI();new i(v).setMethod('POST').send();}};s.prototype.$MLocationPrompt4=function(){'use strict';if(!this.listeners)return;for(var t=0;t<this.listeners.length;t++)this.listeners[t].remove();this.listeners=[];};Object.assign(s,{STRATCOM_ACCEPT:'MLocationPrompt/accept',STRATCOM_DENY:'MLocationPrompt/deny',STRATCOM_UPDATE:'MLocationPrompt/update',STRATCOM_FAIL:'MLocationPrompt/fail',GEOLOCATION_KEY:'authorizeGeolocation',locationAvailable:undefined});f.exports=s;},null);
__d('MMoreItemAutomatic',['CSS','MLocationPrompt','MPageCache','MPageControllerPath','MRequest','MRequestGateway','MRequestTypes','MResponseData','MStopNGo','MURI','MViewport','Stratcom','Vector','createDeprecatedProperties'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();function v(w){'use strict';this._href=w.href;this._sendGeolocation=w.sendGeolocation;this._proximityPages=w.proximity_pages||7;this._loggerID=w.logger_id;this._loggerName=w.logger_name;this._loadImmediately=w.load_first_immediately;this._retryOnError=w.retryOnError;this._addToCache=w.addToCache;this._alwaysProcess=w.alwaysProcess;var x=document.getElementById(w.id);if(x){this._verticalOffset=t.getPos(x).y;this.setMoreItem(x);this.setPersistOnReload(w.persist_on_reload);this._setUpSendRequest();}else this.uninstall();}v.prototype.isElementVisible=function(){'use strict';if(!this._isElementRendered())return false;var w,x=this.getMoreItem();if('getBoundingClientRect' in x){var y=x.getBoundingClientRect(),z=y.width/10,aa=y.height/10,ba=y.left,ca=y.right,da=y.top,ea=y.bottom,fa;while(fa!==x&&ba<=ca&&da<=ea){ba+=z;da+=aa;fa=document.elementFromPoint(Math.round(ba),Math.round(da));}w=fa===x;}else{var ga=t.getPos(x).y,ha=ga+t.getDim(x).y,ia=r.getScrollTop(),ja=ia+r.getUseableHeight();w=ga<=ja&&ha>=ia;}return w;};v.prototype._checkScrolledIntoFetched=function(){'use strict';var w=this.getMoreItem();if(w)if(this._verticalOffset-r.getScrollTop()<0){s.invoke('m:more_item_automatic:items_visible',this._loggerID);this.uninstall();}};v.prototype._onGo=function(){'use strict';if(!this._itemsLoaded){this._readyToUpdate=true;if(this.isElementVisible())s.invoke('m:more_item_automatic:spinner_visible',this._loggerID);if(!this._requestSent&&!this._waitingToSend){this._sendRequestIfScrolledDown();h.addClass(this.getMoreItem(),'async_loading');}else this._updateItems();}else this._checkScrolledIntoFetched();};v.prototype._onStop=function(){'use strict';if(!this._itemsLoaded)this._readyToUpdate=false;};v.prototype._onAjaxPageLoad=function(){'use strict';if(!this._requestSent&&!this._waitingToSend&&(this._loadImmediately||this.isElementVisible())){this._sendRequest();this._loadImmediately=false;}};v.prototype._setUpSendRequest=function(){'use strict';if(!this._requestSent&&!this._waitingToSend&&(this._loadImmediately||this.isElementVisible())){this._sendRequest();this._loadImmediately=false;}this._listeners=[p.listen('go',this._onGo.bind(this)),p.listen('stop',this._onStop.bind(this)),s.listen('m:ajax:complete',null,this._onAjaxPageLoad.bind(this))];};v.prototype._existsOnPage=function(){'use strict';var w=this.getMoreItem();return w?document.documentElement.contains(w):false;};v.prototype.uninstall=function(){'use strict';while(this._listeners&&this._listeners.length)this._listeners.pop().remove();this._requestSent=false;this._waitingToSend=false;this._prefetchResponse=null;this.setMoreItem(null);this.setPersistOnReload(false);clearTimeout(this._retryTimeout);clearTimeout(this._sendTimeout);};v.prototype.withinProximity=function(){'use strict';var w=this.getMoreItem();return w&&t.getPos(w).y-r.getScrollTop()<r.getUseableHeight()*(1+this._proximityPages);};v.prototype._updateItems=function(){'use strict';if(this._prefetchResponse){if(this._existsOnPage()){this._prefetchResponse.process();if(this._addToCache)j.addCachedIUIResponse(k.getRequestPath(),this._prefetchResponse);}s.invoke('m:more_item_automatic:items_loaded',this._loggerID);this._itemsLoaded=true;}};v.prototype._isElementRendered=function(){'use strict';var w=this.getMoreItem();if(!w||!w.offsetHeight)return false;return true;};v.prototype._sendRequestIfScrolledDown=function(){'use strict';if(this.isElementVisible()||this._isElementRendered()&&r.getScrollTop()>100&&this.withinProximity())this._sendRequest();};v.prototype._sendRequest=function(){'use strict';var w=i.getCoords();if(this._sendGeolocation&&w)this._href=new q(this._href).addQueryData('lat',w.latitude).addQueryData('long',w.longitude).toString();var x=new l(new q(this._href).toString());if(this._alwaysProcess){x.setType(n.INDEPENDENT);}else x.setType(n.DEPENDENT);x.setAutoProcess(false);var y=[],z=false,aa=function(){if(!z&&y.length){z=true;y.shift().process();}};if(this._retryOnError){x.setTimeout(m.ERROR_TIMEOUT);x.listen('error',function(ba,ca){this._retryTimeout=setTimeout(function(){if(navigator.onLine){ca.reset();ca.addData({is_retry:1});ca.sendAfterProcessing();}}.bind(this),v.TRY_AGAIN_DELAY);});}x.listen('response',function(ba){ba=new o(ba);ba.listen('complete',function(){z=false;aa();});if(ba.isPagelet()){y.push(ba);aa();return;}z=true;this._prefetchResponse=ba;if(this._readyToUpdate)this._updateItems();}.bind(this));x.send();this._requestSent=true;};u(v,{moreItem:null,persistOnReload:false});Object.assign(v.prototype,{_requestSent:false,_readyToUpdate:true,_waitingToSend:false,_moreStartTime:0,_moreLogged:false,_proximityPages:null,_prefetchResponse:null,_listeners:null,_href:null,_loggerName:null,_loggerID:null,_itemsLoaded:false,_verticalOffset:0});Object.assign(v,{TRY_AGAIN_DELAY:1500});f.exports=v;},null);
__d('InitMMoreItemAutomatic',['MMoreItemAutomatic','Stratcom'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k=function(l){if(!j){j={};i.listen('m:page:loading',null,function(n){for(var o in j)if(!j[o].getPersistOnReload()){j[o].uninstall();delete j[o];}});}var m=l.id;if(j[m])j[m].uninstall();j[m]=new h(l);};g.main=k;},null);
__d('MMoreItemAutomaticLogger',['Stratcom','MarauderLogger'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l){this._loggerName=k;this._loggerID=l;this._listeners=[h.listen('m:page:unload',null,this._pageUnload.bind(this)),h.listen('m:more_item_automatic:spinner_visible',null,this._onSpinnerVisible.bind(this)),h.listen('m:more_item_automatic:items_loaded',null,this._onItemsLoaded.bind(this)),h.listen('m:more_item_automatic:items_visible',null,this._onItemsVisible.bind(this))];}Object.assign(j.prototype,{_loggerName:'',_loggerID:'',_spinnerUnloaded:false,_spinnerVisible:false,_spinnerStartTime:null,_cleanup:function(){while(this._listeners&&this._listeners.length)this._listeners.pop().remove();},_pageUnload:function(){if(this._spinnerVisible){this._spinnerUnloaded=true;this._logLoadingSpinnerTime(this._getTimeSpan(),true);}this._cleanup();},_onSpinnerVisible:function(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerVisible){this._spinnerVisible=true;this._spinnerStartTime=Date.now();}},_onItemsLoaded:function(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerUnloaded){this._logLoadingSpinnerTime(this._getTimeSpan(),false);this._spinnerVisible=false;this._spinnerStartTime=null;}},_onItemsVisible:function(event){if(event.getPath()[0]===this._loggerID)this._logItemsVisible();},_getTimeSpan:function(){return this._spinnerVisible?Date.now()-this._spinnerStartTime:0;},_logLoadingSpinnerTime:function(k,l){i.log('m_more_items_automatic_spinner_visible_time',undefined,{name:this._loggerName,id:this._loggerID,visible_time:k,spinner_unloaded:l});},_logItemsVisible:function(){i.log('m_more_items_automatic_fetched_items_visible',undefined,{name:this._loggerName,id:this._loggerID});this._cleanup();}});j.init=function(k,l){new j(k,l);};f.exports=j;},null);
__d('MLayerHideOnScroll',['Stratcom'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=5;function j(k){'use strict';this.$MLayerHideOnScroll1=null;this.$MLayerHideOnScroll2=null;this.$MLayerHideOnScroll3=k;this.$MLayerHideOnScroll4=null;}j.prototype.enable=function(){'use strict';this.$MLayerHideOnScroll1=[this.$MLayerHideOnScroll3.addListener('show',this.$MLayerHideOnScroll5.bind(this)),this.$MLayerHideOnScroll3.addListener('hide',this.$MLayerHideOnScroll6.bind(this))];if(this.$MLayerHideOnScroll3.isShown())this.$MLayerHideOnScroll5();};j.prototype.disable=function(){'use strict';this.$MLayerHideOnScroll6();while(this.$MLayerHideOnScroll1.length)this.$MLayerHideOnScroll1.pop().remove();this.$MLayerHideOnScroll1=null;};j.prototype.$MLayerHideOnScroll6=function(){'use strict';this.$MLayerHideOnScroll2&&this.$MLayerHideOnScroll2.remove();};j.prototype.$MLayerHideOnScroll5=function(){'use strict';var k=window;this.$MLayerHideOnScroll4=k.scrollY;this.$MLayerHideOnScroll2=h.listen('scroll',null,function(){var l=k.scrollY;if(Math.abs(this.$MLayerHideOnScroll4-l)>=i)this.$MLayerHideOnScroll3.hide();}.bind(this));};f.exports=j;},null);
__d('MLinkshim',['$','setTimeoutAcrossTransitions','AsyncSignal','Stratcom','MLegacyDataStore','LinkshimHandlerConfig'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n='MLinkshim',o={onClick:function(p){var q=p.getNode(n),r=l.get(q);o.click(q,r.dest_uri,r.logging_uri);},click:function(p,q,r){var s=h('meta_referrer');s.content=m.switched_meta_referrer_policy;p.href=q;i(function(){s.content=m.default_meta_referrer_policy;new j(r,{}).send();},100);}};k.listen('click',n,o.onClick);f.exports=o;},null);
__d('MScrollAreaHelper',['MLegacyDataStore'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){k=k||10;var l;while(k>0&&j&&j.nodeType===1){l=h.get(j);if(l&&l.scrollArea)return l.scrollArea;j=j.parentNode;k--;}return null;}g.findScrollArea=i;},null);
__d('MTextMetrics',['DOM','MJSEnvironment'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=3*2;function k(l){'use strict';this._node=l;this._shadow=this._cloneNode();this._offset=this._getOffset();}k.prototype._cloneNode=function(){'use strict';var l=this._getComputedStyle(),m=h.create('pre',{className:'textMetrics',style:k.defaultStyles});l&&k.clonedStyles.forEach(function(n){var o=n.replace(/([A-Z])/g,'-$1').toLowerCase();m.style[n]=l.getPropertyValue(o);});h.appendContent(document.body,m);return m;};k.prototype._getOffset=function(){'use strict';var l=this._getComputedStyle(),m=parseInt(l.paddingLeft,10)+parseInt(l.paddingRight,10)+parseInt(l.borderLeftWidth,10)+parseInt(l.borderRightWidth,10),n=parseInt(l.paddingTop,10)+parseInt(l.paddingBottom,10)+parseInt(l.borderTopWidth,10)+parseInt(l.borderBottomWidth,10);return {height:n,width:m};};k.prototype._getComputedStyle=function(){'use strict';if(window.getComputedStyle){return window.getComputedStyle(this._node,null);}else if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(this._node,null);};k.prototype.measure=function(){'use strict';var l=this._node,m=this._shadow,n=this._offset,o=i.IS_APPLE_WEBKIT_IOS?j:0;m.style.width=l.offsetWidth-n.width-o+'px';m.innerText=l.value+'\n';return {width:m.clientWidth+n.width,height:m.clientHeight+n.height};};k.prototype.destroy=function(){'use strict';h.remove(this._shadow);};Object.assign(k,{clonedStyles:['fontFamily','fontSize','fontStyle','fontWeight','lineHeight','minHeight','whiteSpace','width','wordWrap']});Object.assign(k.prototype,{_node:null,_shadow:null,_offset:null});f.exports=k;},null);
__d('InitMTextMetrics',['setTimeoutAcrossTransitions','setIntervalAcrossTransitions','DOM','MLegacyDataStore','MTextMetrics','Stratcom'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o,p='expandable-textarea',q=function(r){if(!o)t();if(n)return;n=true;function s(w){var x=new l(w),y={metrics:x,resizedInput:null,originalHeight:w.offsetHeight};k.set(w,y);}function t(){o=i(function(){var w=j.scry(document,'textarea',p);w.forEach(function(x){u(x);});},300);}function u(w,x){var y=k.get(w);if(!y.metrics)s(w);if(w.value==y.resizedInput)return;y.resizedInput=w.value;var z=w.style.height;w.style.height=Math.max(0+y.metrics.measure().height,y.originalHeight)+'px';if(x&&z!=w.style.height){var aa=w.value.substr(0,w.selectionStart).split("\n").length,ba=w.value.split("\n").length;if(aa===ba)h(function(){w.scrollIntoView(true);},100);}}function v(event){var w=event.getNode(p);u(w,true);}m.listen(['focus','blur','keypress','keydown','keyup','input'],p,v);m.listen('m:page:unload',null,function(){var w=j.scry(document,'textarea',p);w.forEach(function(x){var y=k.get(x);if(y.metrics){y.metrics.destroy();y.metrics=null;y.styleHeight=null;y.resizedInput=null;}});clearInterval(o);o=null;});};g.main=q;},null);
__d('MOverlay',['setTimeoutAcrossTransitions','cx','ge','CSS','DOM','Locale','MLayer','MJSEnvironment','MViewport','Scroll','Stratcom','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t,u;if(c.__markCompiled)c.__markCompiled();var v=28,w=10,x='m-overlay-layer',y=[x,'tag:textarea'];t=babelHelpers.inherits(z,n);u=t&&t.prototype;function z(aa,ba){'use strict';u.constructor.call(this,aa);this.$MOverlay1=null;this.shownListeners=null;this.init(ba);}z.prototype.buildWrapper=function(aa,ba){'use strict';this.$MOverlay2=l.create('div',{className:s("_5m_s",aa.backgroundClassName)});var ca=l.create('div',{className:"_5m_t"},ba);this.$MOverlay3=l.create('div',{className:s("_5m_u",aa.containerClassName)},[this.$MOverlay2,ca]);if(m.isRTL())this.$MOverlay3.style.direction='rtl';this.$MOverlay4=l.create('div',{className:"_5m_v",sigil:x},this.$MOverlay3);var da=l.create('div',{className:"_5m_w",sigil:'m-overlay-modal blocking-touchable'});return l.create('div',{className:"_5m_x"},[this.$MOverlay4,da]);};z.prototype.getContentRoot=function(){'use strict';return this.$MOverlay3;};z.prototype.show=function(){'use strict';if(this.isShown())return this;u.show.call(this);if(this.isShown()&&!this.shownListeners){this.shownListeners=[r.listen('touchstart',y,this.$MOverlay5.bind(this)),r.listen('touchend',y,this.$MOverlay6.bind(this)),r.listen('m:viewport:orientation-change',null,this.updatePosition.bind(this)),r.listen('focus',y,this.onFocus.bind(this)),r.listen('blur',y,this.onBlur.bind(this))];if(!this.config.suppressScrollHandler)this.shownListeners.push(r.listen('scroll',null,this.onScroll.bind(this)));if(!this.config.suppressTouchMoveHandler)this.shownListeners.push(r.listen('touchmove',x,this.onTouchMove.bind(this)));}return this;};z.prototype.finishHide=function(){'use strict';while(this.shownListeners&&this.shownListeners.length)this.shownListeners.pop().remove();this.shownListeners=null;this.$MOverlay1=null;clearTimeout(this.$MOverlay7);clearInterval(this.$MOverlay8);this.$MOverlay7=null;this.$MOverlay8=null;return u.finishHide.call(this);};z.prototype.updatePosition=function(){'use strict';if(this.$MOverlay9)return;clearInterval(this.$MOverlay8);this.$MOverlay8=null;this.$MOverlay3.style.height=this.getHeight()+'px';this.getRoot().style.top=this.getTop()+'px';clearTimeout(this.$MOverlay10);this.$MOverlay10=null;};z.prototype.getTop=function(){'use strict';return p.getScrollTop();};z.prototype.getHeight=function(){'use strict';if(this.config.useContentHeight){var aa=this.getContentRoot(),ba=aa.getBoundingClientRect();return ba.height;}var ca=p.getHeight(),da=v;if(o.IS_APPLE_WEBKIT_IOS&&o.OS_VERSION===7){var ea=p.isLandscape()?screen.availWidth:screen.availHeight,fa=ea-ca<=19;da=fa?44:10;if(fa)this.$MOverlay8=setInterval(function(){var ga=p.getHeight();if(ga!==ca){clearInterval(this.$MOverlay8);this.$MOverlay8=null;setTimeout(this.updatePosition.bind(this),100);}}.bind(this),500);k.conditionClass(this.getRoot(),"_5rpc",!fa);}return ca-w-da;};z.prototype.onTouchMove=function(aa){'use strict';if(!aa.getNode('tag:textarea')||this.$MOverlay1===null){aa.prevent();}else{var ba=aa.getTarget(),ca=aa.getTouch().clientY,da=this.$MOverlay1-ca,ea=ba.scrollHeight-ba.offsetHeight;if(ea<=0||da<0&&q.getTop(ba)<=0||da>0&&q.getTop(ba)>=ea){aa.prevent();}else aa.stop();}};z.prototype.$MOverlay5=function(aa){'use strict';this.$MOverlay1=aa.getTouch().clientY;};z.prototype.$MOverlay6=function(aa){'use strict';this.$MOverlay1=null;};z.prototype.onScroll=function(aa){'use strict';clearTimeout(this.$MOverlay10);this.$MOverlay10=h(this.updatePosition.bind(this),100);};z.prototype.onFocus=function(aa){'use strict';this.$MOverlay9=true;};z.prototype.onBlur=function(aa){'use strict';this.$MOverlay9=false;this.updatePosition();this.$MOverlay7=h(this.updatePosition.bind(this),1000);};z.prototype.getUpdatePositionBlocked=function(){'use strict';return this.$MOverlay9;};z.prototype.getInsertParent=function(){'use strict';var aa=this.insertParent;if(!aa)aa=j('page');return aa||u.getInsertParent.call(this);};f.exports=z;},null);
__d("XMSiteDiodeMessengerLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messenger\/log\/",{log:{type:"Bool",defaultValue:false}});},null);
__d("XTaggableActivityPreviewTemplateQueryController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/composer\/intl\/preview_template\/",{action_type_id:{type:"Int",required:true}});},null);